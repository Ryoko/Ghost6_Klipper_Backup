#### раздел подключения платы, сюда пишем результат команды ls /dev/serial/ после прочтения мануалов конечно же.
[mcu]
#serial: /dev/ttyAMA0  ### расскоментируйте если подключены по юарт
#serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_3F002D001251333031373837-if00
canbus_uuid: 3b6e88de9a72
#restart_method: command

[include ebb36.cfg]

[include eddy.cfg]

[display_status]
# датчик филамента

#если у вас стоковая лента раскоментируйте две строки ниже и закоментируйте раздел [neopixel printhead] со всеми параметрами. 
[output_pin caselight]
pin: PD14 #PE6

#[neopixel printhead]
#pin: PE6
#   The pin connected to the neopixel. This parameter must be
#   provided.
#chain_count: 3
#   The number of Neopixel chips that are "daisy chained" to the
#   provided pin. The default is 1 (which indicates only a single
#   Neopixel is connected to the pin).
#color_order: GRB
#   Set the pixel order required by the LED hardware (using a string
#   containing the letters R, G, B, W with W optional). Alternatively,
#   this may be a comma separated list of pixel orders - one for each
#   LED in the chain. The default is GRB.
#initial_RED: 0.15
#initial_GREEN: 0.15
#initial_BLUE: 0.15
#   See the "led" section for information on these parameters

[output_pin _Zummer]    # Если убрать подчеркивание из имени то выключатель станет видимым в панели(тогда не забудьте убрать подчеркивание из макроса ниже)
pin: PD15 #PA2 
[gcode_macro beep]
gcode:
  SET_PIN PIN=_Zummer VALUE=1   # в завершающем коде слайсера напиши в конце beep 
  G4 P5000                      # и тогда после окончания печати он тебе пикнет 4 раза. это 5 секунд работы,
  SET_PIN PIN=_Zummer VALUE=0   # если хочется побольше то вместо 5000 поставь например 10000 будет пищать 10 секунд можно также вставить на замену филамента. на начало печати.

### раскомментируйте если установили модель чистки сопла 
#[gcode_macro Clean_nozle]
#gcode:
#   G1 X1 Y20 F10000 
#   G1 X1 Y130 F10000
#   G1 X1 Y70 F10000
#   G1 X1 Y130 F10000
#   G1 X1 Y70 F10000
#   G1 X1 Y130 F10000
#   G1 X1 Y20 F10000



#если у вас стоковая лед лента то этот раздел тоже нужно закоментрировать тут неопиксель подключен в разъем 3дтача
#[neopixel my_neopixel]
#pin: PA8
#   The pin connected to the neopixel. This parameter must be
#   provided.
#chain_count: 27
#   The number of Neopixel chips that are "daisy chained" to the
#   provided pin. The default is 1 (which indicates only a single
#   Neopixel is connected to the pin).
#color_order: GRB
#   Set the pixel order required by the LED hardware (using a string
#   containing the letters R, G, B, W with W optional). Alternatively,
#   this may be a comma separated list of pixel orders - one for each
#   LED in the chain. The default is GRB.
#initial_RED: 0.5
#initial_GREEN: 0.5
#initial_BLUE: 0.5
#initial_WHITE: 0.5
#   See the "led" section for information on these parameters.
### как ни странно инпутшейпинг такой неплохо работает на стоковой голове, нуждается в корректировке но работает.
[input_shaper]
shaper_type_x = mzv
shaper_freq_x = 68.4
shaper_type_y = mzv
shaper_freq_y = 61.6

#shaper_type_x = ei
#shaper_freq_x = 55
#shaper_type_y = 2hump_ei
#shaper_freq_y = 55

########## cam Fan #########  вентилятор отсоса из камеры, пока не завязан ни на какие события, нуждается в макросах или дополнительных датчиках. в работе.
[fan_generic camera_Fan]
pin: PD12 #PB0
#cycle_time: 0.05
kick_start_time: 0.5

#### раздел моторов, не знаешь не трогай! потрогал, не плачь!
[include tmc.cfg]
[stepper_x]
step_pin: PF13
dir_pin: PF12
enable_pin: !PF14
microsteps: 16
rotation_distance: 40
endstop_pin: !PG6
position_endstop: 1
position_max: 255
homing_speed: 40

[stepper_y]
step_pin: PG0
dir_pin: PG1
enable_pin: !PF15
microsteps: 16
rotation_distance: 40
endstop_pin: !PG9
position_endstop: 1
position_max: 220
homing_speed: 40

[stepper_z]
step_pin: PF11
dir_pin: PG3
enable_pin: !PG5
microsteps: 32
rotation_distance: 8
#endstop_pin: !PC8
#endstop_pin: !PC4
endstop_pin: probe:z_virtual_endstop
#position_endstop: 0.5
homing_speed: 10
second_homing_speed: 2
position_min: -20
position_max: 200

# [extruder]
# step_pin: PG4
# dir_pin: !PC1
# enable_pin: !PA2
# microsteps: 16
# rotation_distance: 3.41051
# nozzle_diameter: 0.400
# filament_diameter: 1.750
# heater_pin: PA0 # HE0
# sensor_pin:  PF4 # T0
# sensor_type: Generic 3950
#control: pid
#pid_Kp: 22.2
#pid_Ki: 1.08
#pid_Kd: 114
# min_temp: 0
# max_temp: 320
# pressure_advance = 0.024
# pressure_advance_smooth_time: 0.024
# max_extrude_only_accel: 1000
# max_extrude_only_velocity: 200
# max_extrude_cross_section: 5

[heater_bed]
heater_pin: PA1
sensor_pin: PF3 # TB
sensor_type: EPCOS 100K B57560G104F
#control: watermark
min_temp: 0
max_temp: 130

#### кулер обдува модели
# [fan]
# pin: PA8

#off_below: 0.25
#shutdown_speed: 0.0
##### кулера обдува платы и обдува хотенда. 
# [heater_fan nozzle_fan]
# pin: PE5
# #pin: PC14
# #kik_start_time: 0.1
# shutdown_speed: 1.0
# heater: extruder
# heater_temp: 50
# fan_speed: 1.0

#### выключение по простою, по мне так не очень нужно поэтому задокументировано. 
#[idle_timeout]
#timeout: 1200
#gcode:
#  M84
#  SHUTDOWN_MACHINE
#### датчики различных температур. можно поменять название, главное вместо пробелов поставить подчеркивание
[temperature_sensor orange_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100
## без нужды не трогать, дальше сами знаете...

[safe_z_home]
home_xy_position: 1, 1 #103, 72.5 #255/2-24=103, 210/2-32.5                      # CAUTION! Depends on probe X/Y offset
#z_hop: 10
#move_to_previous: True                                           # Return back ~X0/Y0 after Z0 at center
#z_hop_speed: 20
#speed: 150

####  регулировка откатов здесь. если вы заменили стоковое горло  то оставляйте так,
####   если заменили шестерню и\или деталь фидера, продолжайте настройку, можно лучше, но ненамного
[firmware_retraction]
retract_length: 0.8
retract_speed: 25
unretract_extra_length: 0
unretract_speed: 25

# исключение обьектов, прикольная вещь в куре достаточно отключить комбинг чтоб работало. 
[exclude_object]

#### а вот сюда вообще не надо лезть. как разберетесь лезьте на здоровье, но я предупредил)
[printer]
kinematics: corexy
max_velocity: 400
square_corner_velocity: 5.0
max_accel: 6000
#max_accel_to_decel: 4000
max_z_velocity: 25
max_z_accel: 100

### регулировка положения стола
[bed_screws] # BED_SCREWS_ADJUST
screw1: 30,30
screw1_name: front left screw
screw2: 230,30
screw2_name: front right screw
screw3: 230,185
screw3_name: back right screw
screw4: 30,185
screw4_name: back left screw
speed: 200

# [adxl345]
# cs_pin: PC15
# axes_map: y, x, -z  # тут возможно придется править под ваше расположение осей
# spi_software_sclk_pin: PB13
# spi_software_mosi_pin: PC3
# spi_software_miso_pin: PC2

# [resonance_tester]
# accel_chip: adxl345
# probe_points:
  # 100, 100, 20

#### местонахождение файлов кода, лучше не менять. иногда к таким глюкам приводит, ну его... 
[virtual_sdcard]
path: ~/printer_data/gcodes # если вылазит ошибка virtual_sdcard .. то это здесь, поменяйте как вам написано в подсказке)
## макросы на первое время. очень нужные.)
[pause_resume]
[gcode_arcs]
[display_status]
[exclude_object]
[respond]
[include macros/*.cfg]
#[include scripts/*.cfg]
#[include probe-bltouch.cfg]
[include KAMP_Settings.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 16.458
#*# pid_ki = 0.997
#*# pid_kd = 67.892
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 66.600
#*# pid_ki = 1.388
#*# pid_kd = 799.205
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.049416, -0.091528, -0.142891, -0.156893, -0.176949, -0.166567, -0.140969, -0.088208, 0.040380
#*# 	0.088567, 0.011530, -0.062708, -0.080825, -0.109426, -0.111501, -0.087264, -0.022824, 0.098399
#*# 	0.114928, 0.022546, -0.049672, -0.070978, -0.094943, -0.097878, -0.057211, 0.021307, 0.140531
#*# 	0.139787, 0.050566, -0.023889, -0.046158, -0.077625, -0.070157, -0.038363, 0.027437, 0.126543
#*# 	0.146352, 0.038813, -0.025691, -0.055161, -0.072410, -0.073400, -0.033625, 0.028765, 0.097455
#*# 	0.144822, 0.051055, -0.020075, -0.031519, -0.060165, -0.060964, -0.032615, 0.017365, 0.032678
#*# 	0.143233, 0.035133, -0.037089, -0.060052, -0.097852, -0.104748, -0.074359, -0.023311, -0.013975
#*# 	0.110886, 0.015941, -0.077939, -0.113397, -0.145751, -0.165003, -0.139427, -0.091477, -0.058575
#*# 	0.038971, -0.073853, -0.153767, -0.181905, -0.210001, -0.231611, -0.235250, -0.159137, -0.070722
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = bicubic
#*# y_count = 9
#*# mesh_y_pps = 2
#*# min_y = 36.0
#*# x_count = 9
#*# max_y = 204.96000000000004
#*# mesh_x_pps = 2
#*# max_x = 240.0
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 16
#*# calibrate =
#*# 	0.050000:3333030.982,0.090000:3332743.122,0.130000:3332240.639,
#*# 	0.170000:3330534.268,0.210000:3328732.122,0.250000:3327068.785,
#*# 	0.290000:3325322.822,0.330000:3323688.315,0.370000:3321958.782,
#*# 	0.410000:3320336.609,0.450000:3318640.113,0.490000:3317049.002,
#*# 	0.530000:3315335.709,0.570000:3313803.464,0.610000:3312188.564,
#*# 	0.650000:3310637.695,0.690000:3309041.151,0.730000:3307627.205,
#*# 	0.770000:3306150.382,0.810000:3304734.560,0.850000:3303241.605,
#*# 	0.890000:3301936.814,0.930000:3300537.452,0.970000:3299210.576,
#*# 	1.010000:3297843.123,1.050000:3296579.160,1.090000:3295238.784,
#*# 	1.130000:3293985.791,1.170000:3292656.703,1.210000:3291455.618,
#*# 	1.250000:3290255.122,1.290000:3289063.194,1.330000:3287828.702,
#*# 	1.370000:3286671.149,1.410000:3285479.722,1.450000:3284356.695,
#*# 	1.490000:3283101.915,1.530000:3282001.440,1.570000:3280800.369,
#*# 	1.610000:3279675.263,1.650000:3278458.311,1.690000:3277358.623,
#*# 	1.730000:3276209.978,1.770000:3275115.627,1.810000:3273921.216,
#*# 	1.850000:3272823.004,1.890000:3271624.140,1.930000:3270475.368,
#*# 	1.970000:3269256.696,2.010000:3268222.673,2.050000:3267059.179,
#*# 	2.090000:3265972.860,2.130000:3264813.886,2.170000:3263775.101,
#*# 	2.210000:3262715.036,2.250000:3261675.641,2.290000:3260586.644,
#*# 	2.330000:3259546.847,2.370000:3258489.380,2.410000:3257512.053,
#*# 	2.450000:3256432.595,2.490000:3255501.167,2.530000:3254535.021,
#*# 	2.570000:3253651.472,2.610000:3252669.768,2.650000:3251838.908,
#*# 	2.690000:3250912.088,2.730000:3250053.715,2.770000:3249109.141,
#*# 	2.810000:3248289.183,2.850000:3247444.278,2.890000:3246592.319,
#*# 	2.930000:3245747.119,2.970000:3244960.703,3.010000:3244133.221,
#*# 	3.050000:3243393.792,3.090000:3242594.209,3.130000:3241867.607,
#*# 	3.170000:3241112.325,3.210000:3240391.243,3.250000:3239639.658,
#*# 	3.290000:3238981.907,3.330000:3238252.700,3.370000:3237608.943,
#*# 	3.410000:3236939.019,3.450000:3236326.935,3.490000:3235672.569,
#*# 	3.530000:3235074.084,3.570000:3234414.194,3.610000:3233827.615,
#*# 	3.650000:3233208.878,3.690000:3232646.244,3.730000:3232041.590,
#*# 	3.770000:3231469.287,3.810000:3230930.107,3.850000:3230390.337,
#*# 	3.890000:3229839.578,3.930000:3229322.738,3.970000:3228777.314,
#*# 	4.010000:3228281.081,4.050000:3227788.433
#*# z_offset = 2.450
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 35.275891
#*# drift_calibration =
#*# 	3395886.842935, -2810.760683, 23.339959
#*# 	3363247.710946, -2263.482571, 18.498022
#*# 	3337608.935744, -1871.523821, 15.142715
#*# 	3315705.968363, -1473.693352, 11.430735
#*# 	3298287.046153, -1177.391058, 8.843395
#*# 	3282052.658153, -871.925161, 6.208937
#*# 	3268013.512365, -613.659813, 4.095474
#*# 	3256123.516120, -397.145470, 2.343067
#*# 	3247336.579191, -266.750327, 1.404496
#*# drift_calibration_min_temp = 34.33389719642454
