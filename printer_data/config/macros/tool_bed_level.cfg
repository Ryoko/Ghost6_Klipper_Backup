[gcode_macro _TOOL_SCREW1]
gcode:
    _TOOL_MOVE S={printer['configfile'].config["bed_screws"]["screw1"]}

[gcode_macro _TOOL_SCREW2]
gcode:
    _TOOL_MOVE S={printer['configfile'].config["bed_screws"]["screw2"]}

[gcode_macro _TOOL_SCREW3]
gcode:
    _TOOL_MOVE S={printer['configfile'].config["bed_screws"]["screw3"]}

[gcode_macro _TOOL_SCREW4]
gcode:
    _TOOL_MOVE S={printer['configfile'].config["bed_screws"]["screw4"]}

[gcode_macro _TOOL_UP]
gcode:
    _CHECK_HOME
	G0 Z10 F1500

[gcode_macro _TOOL_DOWN]
gcode:
    _CHECK_HOME
	G0 Z7 F1500

[gcode_macro _TOOL_MOVE]
gcode:
	{% set screw = params.S|default("30,30") %}
	{% set screwX, screwY = screw.split(',')|map('trim')|map('float') %}
    { action_respond_info("Goto: X:%s Y:%s" % (screwX, screwY)) }
    _TOOL_CHECK_HOME
	G0 X{screwX} Y{screwY} Z10 F3000
	G0 Z7 F500	


[gcode_macro _TOOL_CHECK_HOME]
gcode:
	{ action_respond_info("Homed axes:%s" % (printer.toolhead.homed_axes)) }
	{% if printer.toolhead.homed_axes != 'xyz' %}
        G28
    {% endif %}
